var controlIndex,controlAudio,songList,$=window.Zepto,root=window.player,$scope=$(document.body),index=0,audio=new root.controlAudio;function getData(o){$.ajax({type:"GET",url:o,success:function(o){void 0,songList=o,controlIndex=new root.ControlIndex(o.length),controlAudio=new root.controlAudio,bindEvent(),TouchEvent(),$scope.trigger("autoPlay",0)},error:function(){void 0}})}function bindEvent(){$scope.on("click",".prev",function(){var o=controlIndex.prev();root.stop(),"play"==audio.status&&root.progress(),$scope.trigger("autoPlay",o)}).on("click",".next",function(){var o=controlIndex.next();root.stop(),"play"==audio.status&&root.progress(),$scope.trigger("autoPlay",o)}).on("click",".pause",function(){void 0,"pause"==audio.status?(audio.play(),root.progress()):(audio.stop(),root.stop()),$(this).toggleClass("play")}),$scope.on("autoPlay",function(o,t){audio.getAudio(songList[t].audio),root.render(songList[t]),root.renderLastTime(songList[t].duration),"play"==audio.status&&audio.play()})}function TouchEvent(){var o=$scope.find(".pro-wrapper").offset(),e=o.left,r=o.width;$scope.find(".slider").on("touchstart",function(){root.stop(),audio.stop()}).on("touchmove",function(o){var t=(o.changedTouches[0].clientX-e)/r;(t<0||1<t)&&(t=0),root.upData(t)}).on("touchend",function(o){var t=(o.changedTouches[0].clientX-e)/r;(t<0||1<t)&&(t=0);var n=t*songList[controlIndex.index].duration;audio.playTo(n),root.progress(t),$(".pause").removeClass("play")})}getData("../mock/data.json");